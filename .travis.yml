language: swift
osx_image: xcode10.2
xcode_destination: platform=iOS Simulator,OS=12.0,name=iPhone Xs
xcode_scheme: MobileCore
xcode_project: MobileCore.xcodeproj
script:
- set -o pipefail && xcodebuild clean test build -enableCodeCoverage YES -project 'MobileCore.xcodeproj' -scheme MobileCore -sdk iphonesimulator -destination 'platform=iOS Simulator,name=iPhone Xs' ONLY_ACTIVE_ARCH=NO | xcpretty --report html
- xcodebuild build -project "MobileCoreSample/FTMobileCoreSample.xcodeproj" -scheme FTMobileCoreSample -sdk "iphonesimulator" -configuration Release only_active_arch=no defines_module=yes clean build | tee xcodebuild.log | xcpretty --report html
- pod lib lint
after_success:
  - bash <(curl -s https://codecov.io/bash)
before_deploy:
      - git config --local user.name "PraveenP"
      - git config --local user.email "ppraveentr@gmail.com"
deploy:
  provider: releases
  api_key: '${GITHUB_API_KEY}'
  skip_cleanup: true
  on:
    all_branches: true
    tags: true