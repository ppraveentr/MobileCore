language: swift
osx_image: xcode10.2
xcode_destination: platform=iOS Simulator,OS=12.0,name=iPhone X
xcode_scheme: MobileCore
xcode_project: MobileCore.xcodeproj
dist: trusty
sudo: required
addons:
  sonarcloud:
    organization: "ppraveentr-github"
    token:
      secure: '${TRAVIS_TOKEN}'
script:
- set -o pipefail && xcodebuild clean test -enableCodeCoverage YES -project 'MobileCore.xcodeproj' -scheme MobileCore -sdk iphonesimulator -destination 'platform=iOS Simulator,name=iPhone Xs' ONLY_ACTIVE_ARCH=NO | xcpretty
- xcodebuild -project "MobileCoreSample/FTMobileCoreSample.xcodeproj" -scheme FTMobileCoreSample -sdk "iphonesimulator" -configuration Release only_active_arch=no defines_module=yes clean build
- pod lib lint
- sonar-scanner -X
after_success:
  - bash <(curl -s https://codecov.io/bash)
before_deploy:
      - git config --local user.name "PraveenP"
      - git config --local user.email "ppraveentr@gmail.com"
deploy:
  provider: releases
  api_key: '${GITHUB_API_KEY}'
  skip_cleanup: true
  on:
    all_branches: true
    tags: true