language: swift
osx_image: xcode10.2
xcode_destination: platform=iOS Simulator,OS=12.0,name=iPhone X
xcode_scheme: MobileCore
xcode_project: MobileCore.xcodeproj
dist: trusty
sudo: required
addons:
  sonarcloud:
    organization: "ppraveentr-github"
    token:
      secure: OUL+ya5a+VYTVXOegDUNMjbRb3OxCK5qDkIJyyM6+K6HRdgKk5ndXC7NyNcbiDmq8B40c4AlAVf3iHuCebo4e6Kdev1n2M4D+n2ARmCzXy2crK9opNkKbqbIZcoiRK9/kCHYZ+KzRmJEYeDwFR4NoF/q7pW2ykc7DJcF8/wXvBYLvEI2vibUj167+CWQlbL5KXLlIy31o37tXi42CVwV5OBvDDs+UCKlyajxZAudfpgH5y42gWJPD/y+K+crlS3M8ZgGUkR3VR8LDVZYxJixsjCNr2/trkibxU5mqyoLYpmSBqA2xX37+s4DI1Qjf5iPdTPJrXvSzyIKpi79GihIfyhBbNBeNosabgtYv8Rbf2iHk9VHSb+JIMelya1HYCGGl8Rn9r939KDZ+VFXua0lIMim+iLi7HlazjhJCWGriHrcPUxCprh66k1G2qP2OAmylEbBZnNSxELdVGbkSvnv8FZgBbSRjfczgywcKCmliQ/GpA0m4phaknNP3Xofp0QRLY7tUwlMsBA24u5UmgGm7/sdaZUi61XCR4BsNZZJC6aRLwIooGsPTaaVDaQvScj26XKQ0cE/PK9pSoVh7YNpPNXkqKvBSb5Vvd04ZW3804ElNg/ZsMJ9geoLjs83qWy2GJeSka7iSS1jTCciErWt3DJ9v/IxfLfJaZLhQogL9iU=
script:
- set -o pipefail && xcodebuild clean test -enableCodeCoverage YES -project 'MobileCore.xcodeproj' -scheme MobileCore -sdk iphonesimulator -destination 'platform=iOS Simulator,name=iPhone Xs' ONLY_ACTIVE_ARCH=NO
- xcodebuild -project "MobileCoreSample/FTMobileCoreSample.xcodeproj" -scheme FTMobileCoreSample -sdk "iphonesimulator" -configuration Release only_active_arch=no defines_module=yes clean build
- pod lib lint
#- sonar-scanner -X
after_success:
  - bash <(curl -s https://codecov.io/bash)
before_deploy:
      - git config --local user.name "PraveenP"
      - git config --local user.email "ppraveentr@gmail.com"
deploy:
  provider: releases
  api_key: '${GITHUB_API_KEY}'
  skip_cleanup: true
  on:
    all_branches: true
    tags: true